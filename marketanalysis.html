<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ph√¢n t√≠ch Th·ªã tr∆∞·ªùng N√¥ng s·∫£n</title>
    <link rel="icon" type="image/png" href="logo.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group label {
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9rem;
        }

        select, input {
            padding: 12px 16px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            align-self: flex-end;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            border: 1px solid #e0e6ed;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2c3e50;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .trend-up {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
        }

        .trend-down {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .trend-stable {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .metric-change {
            font-size: 0.9rem;
            font-weight: 600;
        }

        .positive { color: #2ecc71; }
        .negative { color: #e74c3c; }
        .neutral { color: #f39c12; }

        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 30px;
        }

        .chart-wrapper {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .analysis-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .analysis-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .analysis-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .analysis-item {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .analysis-item h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .analysis-item p {
            color: #7f8c8d;
            line-height: 1.6;
        }

        .market-indicators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .indicator {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            border-radius: 15px;
            border: 2px solid #e0e6ed;
            transition: all 0.3s ease;
        }

        .indicator:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .indicator-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .indicator-label {
            color: #7f8c8d;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .report-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .export-btn {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(46, 204, 113, 0.3);
        }

        .report-content {
            line-height: 1.8;
            color: #2c3e50;
        }

        .highlight {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .control-group {
                width: 100%;
            }
            
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåæ Ph√¢n t√≠ch Th·ªã tr∆∞·ªùng N√¥ng s·∫£n</h1>
            <p>H·ªá th·ªëng h·ªó tr·ª£ ƒë·ªãnh gi√° v√† b√°n h√†ng th√¥ng minh</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="product">Ch·ªçn n√¥ng s·∫£n:</label>
                <select id="product">
                    <option value="rice">G·∫°o</option>
                    <option value="corn">Ng√¥</option>
                    <option value="coffee">C√† ph√™</option>
                    <option value="pepper">Ti√™u</option>
                    <option value="rubber">Cao su</option>
                </select>
            </div>
            <div class="control-group">
                <label for="region">Khu v·ª±c:</label>
                <select id="region">
                    <option value="north">Mi·ªÅn B·∫Øc</option>
                    <option value="central">Mi·ªÅn Trung</option>
                    <option value="south">Mi·ªÅn Nam</option>
                </select>
            </div>
            <div class="control-group">
                <label for="timeframe">Th·ªùi gian:</label>
                <select id="timeframe">
                    <option value="7days">7 ng√†y</option>
                    <option value="1month">1 th√°ng</option>
                    <option value="3months">3 th√°ng</option>
                    <option value="1year">1 nƒÉm</option>
                </select>
            </div>
            <button class="btn" onclick="updateAnalysis()">C·∫≠p nh·∫≠t ph√¢n t√≠ch</button>
        </div>

        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Gi√° hi·ªán t·∫°i</h3>
                    <div class="card-icon trend-up">üìà</div>
                </div>
                <div class="metric-value" id="currentPrice">25,500 VNƒê/kg</div>
                <div class="metric-change positive" id="priceChange">+2.3% t·ª´ tu·∫ßn tr∆∞·ªõc</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Nhu c·∫ßu th·ªã tr∆∞·ªùng</h3>
                    <div class="card-icon trend-up">üìä</div>
                </div>
                <div class="metric-value" id="demandLevel">Cao</div>
                <div class="metric-change positive" id="demandChange">TƒÉng 15% so v·ªõi th√°ng tr∆∞·ªõc</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">D·ª± b√°o xu h∆∞·ªõng</h3>
                    <div class="card-icon trend-stable">üîÆ</div>
                </div>
                <div class="metric-value" id="forecast">TƒÉng nh·∫π</div>
                <div class="metric-change neutral" id="forecastDetail">D·ª± ki·∫øn tƒÉng 5-8% trong 2 tu·∫ßn t·ªõi</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Kh·ªëi l∆∞·ª£ng giao d·ªãch</h3>
                    <div class="card-icon trend-up">üì¶</div>
                </div>
                <div class="metric-value" id="volume">2,450 t·∫•n</div>
                <div class="metric-change positive" id="volumeChange">+12% so v·ªõi tu·∫ßn tr∆∞·ªõc</div>
            </div>
        </div>

        <div class="market-indicators">
            <div class="indicator">
                <div class="indicator-value" id="supplyIndex">72</div>
                <div class="indicator-label">Ch·ªâ s·ªë cung</div>
            </div>
            <div class="indicator">
                <div class="indicator-value" id="demandIndex">85</div>
                <div class="indicator-label">Ch·ªâ s·ªë c·∫ßu</div>
            </div>
            <div class="indicator">
                <div class="indicator-value" id="volatilityIndex">23</div>
                <div class="indicator-label">ƒê·ªô bi·∫øn ƒë·ªông</div>
            </div>
            <div class="indicator">
                <div class="indicator-value" id="competitionIndex">68</div>
                <div class="indicator-label">M·ª©c ƒë·ªô c·∫°nh tranh</div>
            </div>
        </div>

        <div class="chart-wrapper">
            <h3 class="chart-title">üìà Xu h∆∞·ªõng gi√° c·∫£ theo th·ªùi gian</h3>
            <div class="chart-container">
                <canvas id="priceChart"></canvas>
            </div>
        </div>

        <div class="chart-wrapper">
            <h3 class="chart-title">üìä Ph√¢n t√≠ch nhu c·∫ßu th·ªã tr∆∞·ªùng</h3>
            <div class="chart-container">
                <canvas id="demandChart"></canvas>
            </div>
        </div>

        <div class="analysis-section">
            <h3 class="analysis-title">üîç Ph√¢n t√≠ch chi ti·∫øt</h3>
            <div class="analysis-content">
                <div class="analysis-item">
                    <h4>Xu h∆∞·ªõng gi√° c·∫£</h4>
                    <p>Gi√° g·∫°o ƒëang c√≥ xu h∆∞·ªõng tƒÉng nh·∫π do nhu c·∫ßu xu·∫•t kh·∫©u tƒÉng cao v√† ƒëi·ªÅu ki·ªán th·ªùi ti·∫øt thu·∫≠n l·ª£i cho vi·ªác b·∫£o qu·∫£n.</p>
                </div>
                <div class="analysis-item">
                    <h4>Y·∫øu t·ªë ·∫£nh h∆∞·ªüng</h4>
                    <p>Th·ªùi ti·∫øt, ch√≠nh s√°ch xu·∫•t kh·∫©u, t·ª∑ gi√° USD/VND, v√† m√πa v·ª• l√† nh·ªØng y·∫øu t·ªë ch√≠nh ·∫£nh h∆∞·ªüng ƒë·∫øn gi√° c·∫£.</p>
                </div>
                <div class="analysis-item">
                    <h4>Khuy·∫øn ngh·ªã</h4>
                    <p>N√™n b√°n trong 2-3 tu·∫ßn t·ªõi ƒë·ªÉ t·∫≠n d·ª•ng xu h∆∞·ªõng tƒÉng gi√°. Theo d√µi ch·∫∑t ch·∫Ω th√¥ng tin th·ªùi ti·∫øt v√† ch√≠nh s√°ch.</p>
                </div>
                <div class="analysis-item">
                    <h4>R·ªßi ro</h4>
                    <p>C√≥ th·ªÉ c√≥ bi·∫øn ƒë·ªông m·∫°nh n·∫øu xu·∫•t hi·ªán th·ªùi ti·∫øt b·∫•t th∆∞·ªùng ho·∫∑c thay ƒë·ªïi ch√≠nh s√°ch xu·∫•t kh·∫©u ƒë·ªôt ng·ªôt.</p>
                </div>
            </div>
        </div>

        <div class="report-section">
            <div class="report-header">
                <h3>üìã B√°o c√°o ph√¢n t√≠ch t·ªïng h·ª£p</h3>
                <button class="export-btn" onclick="exportReport()">üì§ Xu·∫•t b√°o c√°o</button>
            </div>
            <div class="report-content">
                <p><strong>Ng√†y b√°o c√°o:</strong> <span id="reportDate"></span></p>
                <p><strong>S·∫£n ph·∫©m:</strong> <span class="highlight" id="reportProduct">G·∫°o</span></p>
                <p><strong>Khu v·ª±c:</strong> <span class="highlight" id="reportRegion">Mi·ªÅn Nam</span></p>
                
                <h4 style="margin-top: 20px; margin-bottom: 10px;">T√≥m t·∫Øt th·ªã tr∆∞·ªùng:</h4>
                <p>Th·ªã tr∆∞·ªùng g·∫°o ƒëang cho th·∫•y nh·ªØng t√≠n hi·ªáu t√≠ch c·ª±c v·ªõi m·ª©c tƒÉng gi√° <span class="highlight">2.3%</span> so v·ªõi tu·∫ßn tr∆∞·ªõc. Nhu c·∫ßu th·ªã tr∆∞·ªùng ·ªü m·ª©c cao v·ªõi kh·ªëi l∆∞·ª£ng giao d·ªãch ƒë·∫°t <span class="highlight">2,450 t·∫•n</span>.</p>
                
                <h4 style="margin-top: 20px; margin-bottom: 10px;">D·ª± b√°o:</h4>
                <p>Xu h∆∞·ªõng tƒÉng gi√° d·ª± ki·∫øn s·∫Ω ti·∫øp t·ª•c trong 2-3 tu·∫ßn t·ªõi v·ªõi m·ª©c tƒÉng d·ª± b√°o <span class="highlight">5-8%</span>. ƒê√¢y l√† th·ªùi ƒëi·ªÉm thu·∫≠n l·ª£i cho vi·ªác b√°n h√†ng.</p>
                
                <h4 style="margin-top: 20px; margin-bottom: 10px;">Khuy·∫øn ngh·ªã chi·∫øn l∆∞·ª£c:</h4>
                <p>1. T·∫≠n d·ª•ng xu h∆∞·ªõng tƒÉng gi√° hi·ªán t·∫°i<br>
                2. Theo d√µi ch·∫∑t ch·∫Ω c√°c y·∫øu t·ªë th·ªùi ti·∫øt<br>
                3. Chu·∫©n b·ªã k·∫ø ho·∫°ch b√°n h√†ng trong 2-3 tu·∫ßn t·ªõi<br>
                4. ƒêa d·∫°ng h√≥a k√™nh ph√¢n ph·ªëi ƒë·ªÉ t·ªëi ∆∞u l·ª£i nhu·∫≠n</p>
            </div>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu m·∫´u
        const marketData = {
            rice: {
                currentPrice: 25500,
                priceChange: 2.3,
                demand: 'Cao',
                demandChange: 15,
                forecast: 'TƒÉng nh·∫π',
                volume: 2450,
                volumeChange: 12,
                supplyIndex: 72,
                demandIndex: 85,
                volatilityIndex: 23,
                competitionIndex: 68
            },
            corn: {
                currentPrice: 18200,
                priceChange: -1.2,
                demand: 'Trung b√¨nh',
                demandChange: 8,
                forecast: '·ªîn ƒë·ªãnh',
                volume: 1850,
                volumeChange: -3,
                supplyIndex: 78,
                demandIndex: 72,
                volatilityIndex: 18,
                competitionIndex: 75
            },
            coffee: {
                currentPrice: 45600,
                priceChange: 4.5,
                demand: 'R·∫•t cao',
                demandChange: 22,
                forecast: 'TƒÉng m·∫°nh',
                volume: 3200,
                volumeChange: 18,
                supplyIndex: 65,
                demandIndex: 92,
                volatilityIndex: 35,
                competitionIndex: 82
            },
            pepper: {
                currentPrice: 125000,
                priceChange: 1.8,
                demand: 'Cao',
                demandChange: 12,
                forecast: 'TƒÉng nh·∫π',
                volume: 450,
                volumeChange: 8,
                supplyIndex: 68,
                demandIndex: 88,
                volatilityIndex: 28,
                competitionIndex: 70
            },
            rubber: {
                currentPrice: 38500,
                priceChange: -2.1,
                demand: 'Th·∫•p',
                demandChange: -5,
                forecast: 'Gi·∫£m nh·∫π',
                volume: 1200,
                volumeChange: -8,
                supplyIndex: 85,
                demandIndex: 58,
                volatilityIndex: 32,
                competitionIndex: 65
            }
        };

        let priceChart, demandChart;

        function initCharts() {
            // Bi·ªÉu ƒë·ªì xu h∆∞·ªõng gi√°
            const priceCtx = document.getElementById('priceChart').getContext('2d');
            priceChart = new Chart(priceCtx, {
                type: 'line',
                data: {
                    labels: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'],
                    datasets: [{
                        label: 'Gi√° (VNƒê/kg)',
                        data: [24800, 25100, 25300, 25000, 25200, 25400, 25500],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#667eea',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString('vi-VN') + ' VNƒê';
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            });

            // Bi·ªÉu ƒë·ªì nhu c·∫ßu th·ªã tr∆∞·ªùng
            const demandCtx = document.getElementById('demandChart').getContext('2d');
            demandChart = new Chart(demandCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Xu·∫•t kh·∫©u', 'Ti√™u th·ª• n·ªôi ƒë·ªãa', 'D·ª± tr·ªØ', 'Ch·∫ø bi·∫øn'],
                    datasets: [{
                        data: [45, 30, 15, 10],
                        backgroundColor: [
                            '#667eea',
                            '#764ba2',
                            '#f093fb',
                            '#4facfe'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });
        }

        function updateAnalysis() {
            const product = document.getElementById('product').value;
            const region = document.getElementById('region').value;
            const timeframe = document.getElementById('timeframe').value;
            
            const data = marketData[product];
            
            // C·∫≠p nh·∫≠t c√°c metric
            document.getElementById('currentPrice').textContent = data.currentPrice.toLocaleString('vi-VN') + ' VNƒê/kg';
            document.getElementById('priceChange').textContent = `${data.priceChange > 0 ? '+' : ''}${data.priceChange}% t·ª´ tu·∫ßn tr∆∞·ªõc`;
            document.getElementById('priceChange').className = `metric-change ${data.priceChange > 0 ? 'positive' : 'negative'}`;
            
            document.getElementById('demandLevel').textContent = data.demand;
            document.getElementById('demandChange').textContent = `${data.demandChange > 0 ? 'TƒÉng' : 'Gi·∫£m'} ${Math.abs(data.demandChange)}% so v·ªõi th√°ng tr∆∞·ªõc`;
            document.getElementById('demandChange').className = `metric-change ${data.demandChange > 0 ? 'positive' : 'negative'}`;
            
            document.getElementById('forecast').textContent = data.forecast;
            document.getElementById('volume').textContent = data.volume.toLocaleString('vi-VN') + ' t·∫•n';
            document.getElementById('volumeChange').textContent = `${data.volumeChange > 0 ? '+' : ''}${data.volumeChange}% so v·ªõi tu·∫ßn tr∆∞·ªõc`;
            document.getElementById('volumeChange').className = `metric-change ${data.volumeChange > 0 ? 'positive' : 'negative'}`;
            
            // C·∫≠p nh·∫≠t ch·ªâ s·ªë th·ªã tr∆∞·ªùng
            document.getElementById('supplyIndex').textContent = data.supplyIndex;
            document.getElementById('demandIndex').textContent = data.demandIndex;
            document.getElementById('volatilityIndex').textContent = data.volatilityIndex;
            document.getElementById('competitionIndex').textContent = data.competitionIndex;
            
            // C·∫≠p nh·∫≠t b√°o c√°o
            const productNames = {
                rice: 'G·∫°o',
                corn: 'Ng√¥',
                coffee: 'C√† ph√™',
                pepper: 'Ti√™u',
                rubber: 'Cao su'
            };
            
            const regionNames = {
                north: 'Mi·ªÅn B·∫Øc',
                central: 'Mi·ªÅn Trung',
                south: 'Mi·ªÅn Nam'
            };
            
            document.getElementById('reportProduct').textContent = productNames[product];
            document.getElementById('reportRegion').textContent = regionNames[region];
            
            // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì gi√°
            updatePriceChart(data.currentPrice);
            
            // Hi·ªáu ·ª©ng loading
            document.querySelector('.container').style.opacity = '0.7';
            setTimeout(() => {
                document.querySelector('.container').style.opacity = '1';
            }, 500);
        }

        function updatePriceChart(currentPrice) {
            const variation = currentPrice * 0.1;
            const newData = [];
            for (let i = 0; i < 7; i++) {
                newData.push(currentPrice + (Math.random() - 0.5) * variation);
            }
            priceChart.data.datasets[0].data = newData;
            priceChart.update('active');
        }

        function exportReport() {
            const reportContent = document.querySelector('.report-content').innerHTML;
            const product = document.getElementById('reportProduct').textContent;
            const region = document.getElementById('reportRegion').textContent;
            
            const exportData = `
                <h1>B√°o c√°o Ph√¢n t√≠ch Th·ªã tr∆∞·ªùng N√¥ng s·∫£n</h1>
                <p><strong>S·∫£n ph·∫©m:</strong> ${product}</p>
                <p><strong>Khu v·ª±c:</strong> ${region}</p>
                <p><strong>Ng√†y xu·∫•t b√°o c√°o:</strong> ${new Date().toLocaleDateString('vi-VN')}</p>
                <hr>
                ${reportContent}
            `;
            
            const blob = new Blob([exportData], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Bao_cao_phan_tich_${product}_${new Date().toISOString().split('T')[0]}.html`;
            a.click();
            URL.revokeObjectURL(url);
            
            // Hi·ªáu ·ª©ng th√¥ng b√°o
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = '‚úÖ ƒê√£ xu·∫•t b√°o c√°o';
            btn.style.background = '#2ecc71';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = 'linear-gradient(135deg, #2ecc71, #27ae60)';
            }, 2000);
        }

        // Kh·ªüi t·∫°o
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            document.getElementById('reportDate').textContent = new Date().toLocaleDateString('vi-VN');
            
            // T·ª± ƒë·ªông c·∫≠p nh·∫≠t d·ªØ li·ªáu m·ªói 30 gi√¢y
            setInterval(() => {
                updateAnalysis();
            }, 30000);
        });
    </script>
</body>
</html>